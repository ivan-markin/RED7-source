{"version":3,"sources":["../src/stories-slider.esm.js"],"names":["el","params","mainSwiperEl","querySelector","autoplayDuration","Swiper","EffectCube","onSlidesIndexesChange","onAutoplayStart","onAutoplayStop","mainSwiper","videoRaf","enabled","activeSubSwiperIndex","subSwipers","slideIndexesChangeRaf","isTouched","touchStartTime","touchStartTimeout","touchHoldDuration","autoplayStartTime","autoplayTimeLeft","autoplayTouchPaused","startAutoplay","swiper","durationForce","subSwiperIndex","indexOf","duration","currentSlideDuration","parseInt","slides","activeIndex","getAttribute","videoEl","eq","find","Number","isNaN","storiesSliderAutoplayTimeout","setTimeout","isEnd","slideNext","stopAutoplay","clearTimeout","pauseAutoplay","cancelAnimationFrame","pause","undefined","Date","getTime","calcTranslate","$currentBullet","$el","children","remove","append","onSubSwiperSlideChange","removeClass","currentTime","requestAnimationFrame","play","err","forEach","vEl","filter","s","index","prevAll","addClass","nextAll","clientWidth","transition","transform","setPerspectiveFix","classList","add","removePerspectiveFix","modules","effect","speed","threshold","cubeEffect","shadow","observer","on","transitionStart","sliderFirstMove","transitionEnd","init","resistanceRatio","slideChange","prevSubSwiper","currentSubSwiper","initMainSwiper","querySelectorAll","subSwiperEl","nested","allowTouchMove","touchStart","touchEnd","resumeAutoPlay","paginationContainerEl","document","createElement","i","length","paginationBulletEl","appendChild","initSubSwiperPagination","slideEl","navLeftEl","navRightEl","addEventListener","isBeginning","slidePrev","initSubSwiperNavigation","push","destroy","subSwiper","destroySubSwiperNavigation","slideTo","mainIndex","subIndex","destroyed","enable","disable"],"mappings":"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","file":"stories-slider.min.js","sourcesContent":["/* eslint-disable no-shadow */\nexport default function createStoriesSlider(el, params = {}) {\n  const mainSwiperEl = el.querySelector('.swiper');\n  const {\n    autoplayDuration = 5000,\n    Swiper,\n    EffectCube,\n    onSlidesIndexesChange,\n    onAutoplayStart,\n    onAutoplayStop,\n  } = params;\n  let { enabled = true } = params;\n\n  let activeSubSwiperIndex = 0;\n\n  let mainSwiper;\n  let videoRaf;\n  const subSwipers = [];\n\n  let slideIndexesChangeRaf;\n\n  let isTouched;\n  let touchStartTime;\n  let touchStartTimeout;\n  let touchHoldDuration;\n  let autoplayStartTime;\n  let autoplayTimeLeft;\n  let autoplayTouchPaused;\n\n  const startAutoplay = (swiper, durationForce) => {\n    const subSwiperIndex = subSwipers.indexOf(swiper);\n    let duration =\n      typeof durationForce === 'undefined' ? autoplayDuration : durationForce;\n    let currentSlideDuration = parseInt(\n      swiper.slides[swiper.activeIndex].getAttribute('data-duration'),\n      10,\n    );\n    const videoEl = swiper.slides.eq(swiper.activeIndex).find('video')[0];\n    if (Number.isNaN(currentSlideDuration) && videoEl) {\n      currentSlideDuration = videoEl.duration * 1000;\n    }\n    if (\n      !Number.isNaN(currentSlideDuration) &&\n      currentSlideDuration > 0 &&\n      typeof durationForce === 'undefined'\n    ) {\n      duration = currentSlideDuration;\n    }\n    autoplayTimeLeft = duration;\n\n    swiper.storiesSliderAutoplayTimeout = setTimeout(() => {\n      if (!swiper.isEnd) {\n        swiper.slideNext();\n      } else {\n        if (activeSubSwiperIndex !== subSwiperIndex) return;\n        if (!mainSwiper.isEnd) mainSwiper.slideNext();\n      }\n    }, duration);\n\n    if (onAutoplayStart) onAutoplayStart(swiper);\n    return duration;\n  };\n  const stopAutoplay = (swiper) => {\n    clearTimeout(swiper.storiesSliderAutoplayTimeout);\n    if (onAutoplayStop) onAutoplayStop(swiper);\n  };\n  const pauseAutoplay = (swiper) => {\n    stopAutoplay(swiper);\n    // find current video\n    const videoEl = swiper.slides.eq(swiper.activeIndex).find('video')[0];\n    if (videoEl) {\n      cancelAnimationFrame(videoRaf);\n      videoEl.pause();\n    }\n    const duration = autoplayTimeLeft || autoplayDuration;\n    let currentSlideDuration = parseInt(\n      swiper.slides[swiper.activeIndex].getAttribute('data-duration'),\n      10,\n    );\n    if (Number.isNaN(currentSlideDuration)) currentSlideDuration = undefined;\n    if (!currentSlideDuration && videoEl) {\n      currentSlideDuration = videoEl.duration * 1000;\n    }\n    autoplayTimeLeft = duration - (new Date().getTime() - autoplayStartTime);\n    if (swiper.isEnd && autoplayTimeLeft < 0) return;\n    if (autoplayTimeLeft < 0) autoplayTimeLeft = 0;\n\n    const calcTranslate =\n      1 - autoplayTimeLeft / (currentSlideDuration || autoplayDuration);\n    const $currentBullet = swiper.$el.find(\n      `.stories-slider-pagination-bullet:nth-child(${swiper.activeIndex + 1})`,\n    );\n\n    $currentBullet.children('span').remove();\n    $currentBullet.append(\n      `<span style=\"transform:translateX(${\n        -100 + calcTranslate * 100\n      }%)\"></span>`,\n    );\n  };\n  const resumeAutoPlay = (swiper) => {\n    if (swiper.isEnd && autoplayTimeLeft < 0) return;\n    autoplayStartTime = new Date().getTime();\n\n    startAutoplay(swiper, autoplayTimeLeft);\n    // find current video\n    const videoEl = swiper.slides.eq(swiper.activeIndex).find('video')[0];\n    if (videoEl) {\n      try {\n        videoRaf = requestAnimationFrame(() => {\n          videoEl.play();\n        });\n      } catch (err) {\n        // error\n      }\n    }\n    swiper.$el\n      .find(\n        `.stories-slider-pagination-bullet:nth-child(${\n          swiper.activeIndex + 1\n        })`,\n      )\n      .children('span')\n      .transform('translateX(0%)')\n      .transition(`${autoplayTimeLeft}ms`);\n  };\n\n  const onSubSwiperSlideChange = (swiper) => {\n    stopAutoplay(swiper);\n    startAutoplay(swiper);\n    autoplayStartTime = new Date().getTime();\n    swiper.$el\n      .find('.stories-slider-pagination-bullet-current')\n      .removeClass('stories-slider-pagination-bullet-current');\n    const $currentBullet = swiper.$el.find(\n      `.stories-slider-pagination-bullet:nth-child(${swiper.activeIndex + 1})`,\n    );\n    // find current video\n    const videoEl = swiper.slides.eq(swiper.activeIndex).find('video')[0];\n    if (videoEl) {\n      videoEl.currentTime = 0;\n      try {\n        videoRaf = requestAnimationFrame(() => {\n          videoEl.play();\n        });\n      } catch (err) {\n        // error\n      }\n    }\n    // find other videos\n    swiper.slides.find('video').forEach((vEl) => {\n      if (vEl === videoEl) return;\n      vEl.currentTime = 0;\n      cancelAnimationFrame(videoRaf);\n      vEl.pause();\n    });\n    subSwipers\n      .filter((s, index) => index !== activeSubSwiperIndex)\n      .forEach((s) => {\n        s.$el.find('video').forEach((videoEl) => {\n          cancelAnimationFrame(videoRaf);\n\n          videoEl.pause();\n        });\n      });\n    // prev bullets\n    $currentBullet\n      .prevAll()\n      .addClass('stories-slider-pagination-bullet-viewed')\n      .children('span')\n      .remove();\n    $currentBullet.prevAll().append('<span></span>');\n\n    // next bullets\n    $currentBullet\n      .nextAll()\n      .removeClass(\n        'stories-slider-pagination-bullet-viewed stories-slider-pagination-bullet-current',\n      )\n      .children('span')\n      .remove();\n    $currentBullet.nextAll().append('<span></span>');\n\n    // current bullet\n    $currentBullet\n      .removeClass('stories-slider-pagination-bullet-viewed')\n      .addClass('stories-slider-pagination-bullet-current')\n      .children('span')\n      .remove();\n    $currentBullet.append('<span></span>');\n    // eslint-disable-next-line\n    const __clientWidth = $currentBullet[0].clientWidth;\n    $currentBullet\n      .children('span')\n      .transition(`${autoplayTimeLeft}ms`)\n      .transform('translateX(0%)');\n    if (onSlidesIndexesChange) {\n      cancelAnimationFrame(slideIndexesChangeRaf);\n      slideIndexesChangeRaf = requestAnimationFrame(() => {\n        onSlidesIndexesChange(activeSubSwiperIndex, swiper.activeIndex);\n      });\n    }\n  };\n\n  const initMainSwiper = () => {\n    const setPerspectiveFix = () => {\n      el.classList.add('stories-slider-perspective');\n    };\n    const removePerspectiveFix = () => {\n      el.classList.remove('stories-slider-perspective');\n    };\n    mainSwiper = new Swiper(mainSwiperEl, {\n      modules: typeof EffectCube !== 'undefined' ? [EffectCube] : [],\n      effect: 'cube',\n      speed: 500,\n      threshold: 5,\n      cubeEffect: {\n        shadow: false,\n      },\n      observer: true,\n      on: {\n        transitionStart() {\n          removePerspectiveFix();\n        },\n        sliderFirstMove() {\n          removePerspectiveFix();\n        },\n        transitionEnd() {\n          setPerspectiveFix();\n        },\n        init(mainSwiper) {\n          mainSwiper.params.resistanceRatio = 0.5;\n          setPerspectiveFix();\n        },\n        slideChange() {\n          const prevSubSwiper = subSwipers[activeSubSwiperIndex];\n          activeSubSwiperIndex = mainSwiper.activeIndex;\n          const currentSubSwiper = subSwipers[activeSubSwiperIndex];\n          stopAutoplay(prevSubSwiper);\n          startAutoplay(currentSubSwiper);\n          onSubSwiperSlideChange(currentSubSwiper, false);\n        },\n      },\n    });\n  };\n\n  const initSubSwiperPagination = (subSwiperEl) => {\n    const slides = subSwiperEl.querySelectorAll('.swiper-slide');\n    const paginationContainerEl = document.createElement('div');\n    paginationContainerEl.classList.add('stories-slider-pagination');\n\n    for (let i = 0; i < slides.length; i += 1) {\n      const paginationBulletEl = document.createElement('div');\n      paginationBulletEl.classList.add('stories-slider-pagination-bullet');\n      paginationBulletEl.appendChild(document.createElement('span'));\n      paginationContainerEl.appendChild(paginationBulletEl);\n    }\n\n    subSwiperEl.appendChild(paginationContainerEl);\n  };\n  const destroySubSwiperPagination = (swiper) => {\n    swiper.$el\n      .find('.stories-slider-pagination, .stories-slider-pagination-bullet')\n      .remove();\n  };\n  const initSubSwiperNavigation = (subSwiperEl, swiper) => {\n    const slides = subSwiperEl.querySelectorAll('.swiper-slide');\n\n    slides.forEach((slideEl) => {\n      const navLeftEl = document.createElement('div');\n      const navRightEl = document.createElement('div');\n\n      navLeftEl.classList.add(\n        'stories-slider-button',\n        'stories-slider-button-prev',\n      );\n      navRightEl.classList.add(\n        'stories-slider-button',\n        'stories-slider-button-next',\n      );\n\n      slideEl.appendChild(navLeftEl);\n      slideEl.appendChild(navRightEl);\n\n      const onNavLeftClick = () => {\n        if (touchHoldDuration > 200) return;\n        if (swiper.isBeginning) {\n          mainSwiper.slidePrev();\n          return;\n        }\n        swiper.slidePrev();\n      };\n      const onNavRightClick = () => {\n        if (touchHoldDuration > 200) return;\n        if (swiper.isEnd) {\n          mainSwiper.slideNext();\n          return;\n        }\n        swiper.slideNext();\n      };\n\n      navLeftEl.addEventListener('click', onNavLeftClick);\n      navRightEl.addEventListener('click', onNavRightClick);\n    });\n  };\n\n  const destroySubSwiperNavigation = (swiper) => {\n    swiper.slides.find('.stories-slider-button').remove();\n  };\n  const initSubSwipers = () => {\n    el.querySelectorAll('.swiper .swiper').forEach(\n      (subSwiperEl, subSwiperIndex) => {\n        const swiper = new Swiper(subSwiperEl, {\n          speed: 1,\n          nested: true,\n          allowTouchMove: false,\n          observer: true,\n          on: {\n            touchStart(swiper) {\n              isTouched = true;\n              autoplayTouchPaused = false;\n              touchStartTime = new Date().getTime();\n              touchStartTimeout = setTimeout(() => {\n                autoplayTouchPaused = true;\n                pauseAutoplay(swiper);\n              }, 200);\n            },\n            touchEnd(swiper) {\n              clearTimeout(touchStartTimeout);\n              if (activeSubSwiperIndex !== subSwiperIndex) return;\n              if (!isTouched) {\n                return;\n              }\n              touchHoldDuration = new Date().getTime() - touchStartTime;\n              if (autoplayTouchPaused) resumeAutoPlay(swiper);\n              autoplayTouchPaused = false;\n              isTouched = false;\n            },\n            init(swiper) {\n              if (!enabled) return;\n              if (activeSubSwiperIndex !== subSwiperIndex) {\n                stopAutoplay(swiper);\n              } else {\n                requestAnimationFrame(() => {\n                  onSubSwiperSlideChange(swiper);\n                });\n              }\n            },\n            slideChange(swiper) {\n              onSubSwiperSlideChange(swiper);\n            },\n          },\n        });\n\n        initSubSwiperPagination(subSwiperEl);\n\n        initSubSwiperNavigation(subSwiperEl, swiper);\n\n        subSwipers.push(swiper);\n      },\n    );\n  };\n\n  initMainSwiper();\n  initSubSwipers();\n\n  const enable = () => {\n    if (enabled) return;\n    subSwipers.forEach((subSwiper, subSwiperIndex) => {\n      if (subSwiperIndex === activeSubSwiperIndex) {\n        onSubSwiperSlideChange(subSwiper);\n      }\n    });\n  };\n\n  const disable = () => {\n    enabled = false;\n    subSwipers.forEach((subSwiper, subSwiperIndex) => {\n      subSwiper.$el.find('video').forEach((videoEl) => {\n        cancelAnimationFrame(videoRaf);\n        videoEl.pause();\n      });\n      if (subSwiperIndex === activeSubSwiperIndex) {\n        pauseAutoplay(subSwiper);\n      } else {\n        stopAutoplay(subSwiper);\n      }\n    });\n  };\n\n  const destroy = () => {\n    if (mainSwiper && mainSwiper.destroy) mainSwiper.destroy();\n    subSwipers.forEach((subSwiper) => {\n      stopAutoplay(subSwiper);\n      destroySubSwiperPagination(subSwiper);\n      destroySubSwiperNavigation(subSwiper);\n      if (subSwiper.destroy) subSwiper.destroy();\n    });\n  };\n\n  const slideTo = (mainIndex, subIndex) => {\n    if (mainSwiper && mainSwiper.slideTo && !mainSwiper.destroyed) {\n      mainSwiper.slideTo(mainIndex, 0);\n    }\n    if (typeof subIndex !== 'undefined') {\n      const subSwiper = subSwipers[mainIndex];\n      if (subSwiper.slideTo && !subSwiper.destroyed) {\n        if (subSwiper.activeIndex === subIndex) {\n          onSubSwiperSlideChange(subSwiper);\n        } else {\n          subSwiper.slideTo(subIndex, 0);\n        }\n      }\n    }\n  };\n\n  return { el, mainSwiper, subSwipers, destroy, slideTo, enable, disable };\n}\n"]}